---
import ProjectCard from "./ProjectCard.astro";

interface Project {
  title: string;
  description: string;
  tags: string[];
  images: string[];
  link?: string;
  repo?: string;
}

// Props con valor por defecto y validacion
const { projects = [] } = Astro.props;
const safeProjects = Array.isArray(projects) ? projects.filter(project => 
  project?.title && 
  project?.description && 
  project?.tags && 
  project?.images
) : [];
---

<section id="proyectos" class="py-10">
  <!-- Titulo -->
  <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-6">
    <div class="md:col-span-3 bento-box flex items-center justify-center p-6">
      <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center">
        <svg class="w-7 h-7 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
        </svg>
      </div>
    </div>
    <div class="md:col-span-9 bento-box bento-accent animate-in p-6">
      <span class="text-foreground/60 text-sm font-medium uppercase tracking-wider">Portafolio</span>
      <h2 class="text-3xl md:text-4xl font-bold text-foreground">
        Mis Proyectos
      </h2>
      <p class="text-foreground/70 mt-2">
        Una coleccion de proyectos que demuestran mi pasion por la tecnologia
      </p>
    </div>
  </div>

  <!-- Grid de proyectos - Simple 3 columnas sin huecos -->
  {safeProjects.length > 0 ? (
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {safeProjects.map((project: Project, index: number) => (
        <div 
          class="animate-in"
          style={`animation-delay: ${index * 0.08}s`}
        >
          <ProjectCard project={project} />
        </div>
      ))}
    </div>
  ) : (
    <div class="bento-box text-center py-12 p-6">
      <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4">
        <svg class="w-7 h-7 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
        </svg>
      </div>
      <p class="text-xl text-foreground font-medium mb-2">
        Sin proyectos
      </p>
      <p class="text-foreground/60">
        Pronto agregare nuevos proyectos
      </p>
    </div>
  )}
</section>
